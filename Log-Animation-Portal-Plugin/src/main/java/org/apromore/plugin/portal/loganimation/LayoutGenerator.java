package org.apromore.plugin.portal.loganimation;

import java.util.HashMap;
import java.util.Map;

/**
 * Created by Raffaele Conforti (conforti.raffaele@gmail.com) on 3/11/17.
 */
public class LayoutGenerator {

    public static void main(String[] args) {
        String layout = "{\"elements\":{\"edges\":[{\"data\":{\"strength\":50,\"color\":\"#424242\",\"style\":\"solid\",\"source\":\"18\",\"label\":\"\",\"target\":\"18\",\"id\":\"18x18\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"22\",\"label\":\"413\",\"target\":\"11\",\"id\":\"e692a326-f397-442e-ae49-482df77fd433\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":66.28,\"color\":\"#3d3d3d\",\"style\":\"solid\",\"source\":\"21\",\"label\":\"403\",\"target\":\"19\",\"id\":\"2167b0bc-fba1-4019-9816-acf49ea59b75\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"20\",\"label\":\"413\",\"target\":\"13\",\"id\":\"a156e997-27d4-4206-a890-5dbba1b52e02\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":100,\"color\":\"#292929\",\"style\":\"dashed\",\"source\":\"26\",\"label\":\"608\",\"target\":\"12\",\"id\":\"03184896-abff-4417-99fa-9d3ff2eba061\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":84.54,\"color\":\"#323232\",\"style\":\"solid\",\"source\":\"2\",\"label\":\"514\",\"target\":\"6\",\"id\":\"e4a5e29a-a9b6-4514-9da8-d4dd115b4015\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":50,\"color\":\"#424242\",\"style\":\"solid\",\"source\":\"19\",\"label\":\"\",\"target\":\"8\",\"id\":\"19x8\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":50,\"color\":\"#424242\",\"style\":\"solid\",\"source\":\"4\",\"label\":\"\",\"target\":\"4\",\"id\":\"4x4\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":50.49,\"color\":\"#464646\",\"style\":\"solid\",\"source\":\"4\",\"label\":\"307\",\"target\":\"15\",\"id\":\"355279f2-d6fa-4234-adec-6e497b795a6c\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"5\",\"label\":\"413\",\"target\":\"9\",\"id\":\"538bc6e2-e36b-4a3f-bbb6-d890c696c08c\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":84.54,\"color\":\"#323232\",\"style\":\"solid\",\"source\":\"6\",\"label\":\"514\",\"target\":\"2\",\"id\":\"700423d2-877d-4c2f-bd83-f7afa2b196e0\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":50,\"color\":\"#424242\",\"style\":\"solid\",\"source\":\"6\",\"label\":\"\",\"target\":\"6\",\"id\":\"6x6\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"6\",\"label\":\"413\",\"target\":\"20\",\"id\":\"0a7e86b9-f62a-4c01-8bcb-cdb6da0a6120\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"7\",\"label\":\"413\",\"target\":\"21\",\"id\":\"8c8420c0-45a3-4589-ae8b-7da79aaf7c88\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"8\",\"label\":\"413\",\"target\":\"17\",\"id\":\"4301cef9-a4a2-4033-89b7-4139268ad6bd\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"9\",\"label\":\"413\",\"target\":\"22\",\"id\":\"0d3ac58e-b252-4188-a9bc-70c894d04d2e\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"10\",\"label\":\"413\",\"target\":\"16\",\"id\":\"b794635f-35b1-42a6-af81-7fe6215ff244\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"11\",\"label\":\"413\",\"target\":\"10\",\"id\":\"52cd3949-1c81-447f-9019-54b216cd20e6\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":61.51,\"color\":\"#404040\",\"style\":\"solid\",\"source\":\"12\",\"label\":\"374\",\"target\":\"4\",\"id\":\"23ec0498-d3b2-4a41-92e2-943410271a3a\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":38.49,\"color\":\"#4d4d4d\",\"style\":\"solid\",\"source\":\"12\",\"label\":\"234\",\"target\":\"14\",\"id\":\"8958f3b9-2c3e-4cf5-95c3-35fe5aaa5749\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"13\",\"label\":\"413\",\"target\":\"5\",\"id\":\"d9a5cc9b-b414-4e4e-b344-be25f4bef4f7\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":38.98,\"color\":\"#4d4d4d\",\"style\":\"solid\",\"source\":\"14\",\"label\":\"237\",\"target\":\"6\",\"id\":\"0559bf16-8992-4027-8cdb-36bb519feeae\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":50.49,\"color\":\"#464646\",\"style\":\"solid\",\"source\":\"15\",\"label\":\"307\",\"target\":\"6\",\"id\":\"62f86ccd-c31a-4383-930d-826e43e6fa6d\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"16\",\"label\":\"413\",\"target\":\"18\",\"id\":\"ed69a423-4922-43fb-811d-2014b761d019\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"dashed\",\"source\":\"17\",\"label\":\"413\",\"target\":\"25\",\"id\":\"d262b767-bd86-4ab1-9997-e2cc1774016b\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"strength\":67.93,\"color\":\"#3c3c3c\",\"style\":\"solid\",\"source\":\"18\",\"label\":\"413\",\"target\":\"7\",\"id\":\"fad3313f-a5c9-4df2-ba03-d850093b3fed\"},\"position\":{},\"group\":\"edges\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"}],\"nodes\":[{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#83a9c5\",\"name\":\"AmendRequestforQuotationRequester\\n\\n514\",\"width\":\"161px\",\"id\":\"2\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1055.5,\"y\":21},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#9fbbd2\",\"name\":\"AnalyzePurchaseRequisition\\n\\n382\",\"width\":\"161px\",\"id\":\"4\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":386.5,\"y\":166},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"AnalyzeQuotationcomparisonMap\\n\\n413\",\"width\":\"161px\",\"id\":\"5\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1501.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#045a8d\",\"name\":\"AnalyzeRequestforQuotation\\n\\n1107\",\"width\":\"161px\",\"id\":\"6\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":832.5,\"y\":163},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"ApprovePurchaseOrderforpayment\\n\\n413\",\"width\":\"161px\",\"id\":\"7\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":3062.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"AuthorizeSuppliersInvoicepayment\\n\\n413\",\"width\":\"161px\",\"id\":\"8\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":3954.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"Choosebestoption\\n\\n413\",\"width\":\"161px\",\"id\":\"9\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1724.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"ConfirmPurchaseOrder\\n\\n413\",\"width\":\"161px\",\"id\":\"10\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":2393.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"CreatePurchaseOrder\\n\\n413\",\"width\":\"161px\",\"id\":\"11\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":2170.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#6f9dbc\",\"name\":\"CreatePurchaseRequisition\\n\\n608\",\"width\":\"161px\",\"id\":\"12\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":163.5,\"y\":92},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"CreateQuotationcomparisonMap\\n\\n413\",\"width\":\"161px\",\"id\":\"13\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1278.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#becee0\",\"name\":\"CreateRequestforQuotationRequester\\n\\n237\",\"width\":\"161px\",\"id\":\"14\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":609.5,\"y\":23},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#afc5d9\",\"name\":\"CreateRequestforQuotationRequesterManager\\n\\n307\",\"width\":\"161px\",\"id\":\"15\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":609.5,\"y\":166},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"DeliverGoodsServices\\n\\n413\",\"width\":\"161px\",\"id\":\"16\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":2616.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"Payinvoice\\n\\n413\",\"width\":\"161px\",\"id\":\"17\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":4177.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#93b3cc\",\"name\":\"ReleasePurchaseOrder\\n\\n439\",\"width\":\"161px\",\"id\":\"18\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":2839.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#9bb8d0\",\"name\":\"ReleaseSuppliersInvoice\\n\\n403\",\"width\":\"161px\",\"id\":\"19\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":3508.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"SendRequestforQuotationtoSupplier\\n\\n413\",\"width\":\"161px\",\"id\":\"20\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1055.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"Sendinvoice\\n\\n413\",\"width\":\"161px\",\"id\":\"21\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":3285.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"roundrectangle\",\"color\":\"#99b7cf\",\"name\":\"Settleconditionswithsupplier\\n\\n413\",\"width\":\"161px\",\"id\":\"22\",\"textwidth\":\"151px\",\"height\":\"30px\"},\"position\":{\"x\":1947.5,\"y\":305},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"ellipse\",\"color\":\"#C0A3A1\",\"name\":\"\",\"width\":\"15px\",\"id\":\"25\",\"textwidth\":\"151px\",\"height\":\"15px\"},\"position\":{\"x\":4327.5,\"y\":165},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"},{\"data\":{\"shape\":\"ellipse\",\"color\":\"#C1C9B0\",\"name\":\"\",\"width\":\"15px\",\"id\":\"26\",\"textwidth\":\"151px\",\"height\":\"15px\"},\"position\":{\"x\":13.5,\"y\":92},\"group\":\"nodes\",\"removed\":false,\"selected\":false,\"selectable\":true,\"locked\":false,\"grabbable\":true,\"classes\":\"\"}]},\"style\":[{\"selector\":\"node\",\"style\":{\"text-valign\":\"center\",\"text-border-width\":\"10px\",\"text-wrap\":\"wrap\",\"text-max-width\":\"data(textwidth)\",\"font-size\":\"7px\",\"height\":\"data(height)\",\"width\":\"data(width)\",\"shape\":\"data(shape)\",\"background-color\":\"data(color)\",\"padding\":\"5px\",\"label\":\"data(name)\"}},{\"selector\":\":selected\",\"style\":{\"border-color\":\"#333\",\"border-width\":\"3px\"}},{\"selector\":\"edge\",\"style\":{\"label\":\"data(label)\",\"text-margin-y\":\"-10px\",\"color\":\"data(color)\",\"font-size\":\"7px\",\"opacity\":\"1\",\"width\":\"mapData(strength,0,100,1,6)\",\"line-style\":\"data(style)\",\"line-color\":\"data(color)\",\"curve-style\":\"bezier\",\"target-arrow-shape\":\"triangle\",\"source-arrow-color\":\"data(color)\",\"target-arrow-color\":\"data(color)\"}},{\"selector\":\"edge.questionable\",\"style\":{\"line-style\":\"dotted\",\"target-arrow-shape\":\"diamond\"}},{\"selector\":\".faded\",\"style\":{\"text-opacity\":\"0\",\"opacity\":\"0.25\"}},{\"selector\":\".edgebendediting-hasbendpoints\",\"style\":{\"curve-style\":\"segments\",\"segment-distances\":\"fn\",\"segment-weights\":\"fn\",\"edge-distances\":\"node-position\"}}],\"zoomingEnabled\":true,\"userZoomingEnabled\":true,\"zoom\":0.8024167763085848,\"minZoom\":1e-50,\"maxZoom\":1e+50,\"panningEnabled\":true,\"userPanningEnabled\":true,\"pan\":{\"x\":107.20246381816708,\"y\":74.90757006666124},\"boxSelectionEnabled\":true,\"renderer\":{\"name\":\"canvas\"},\"wheelSensitivity\":0.1}";
        Map<String, ElementLayout> layoutMap = generateLayout(layout);
        System.out.println();
    }

    public static Map<String, ElementLayout> generateLayout(String layout) {
        Map<String, ElementLayout> elementLayoutMap = new HashMap<>();
        Map<String, String> nodeIDs = new HashMap<>();

        String tmp = layout;

        if(tmp.startsWith("{\"elements\":{\"edges\"")) {
            String edges = tmp.substring(tmp.indexOf("{\"edges\""), tmp.indexOf(",\"nodes\""));
            tmp = tmp.substring(tmp.indexOf(edges) + edges.length());
            tmp = analyseNodes(elementLayoutMap, nodeIDs, tmp);
            tmp = analyseEdges(elementLayoutMap, nodeIDs, edges);
        }else {
            tmp = analyseNodes(elementLayoutMap, nodeIDs, tmp);
            tmp = analyseEdges(elementLayoutMap, nodeIDs, tmp);
        }

        return elementLayoutMap;
    }

    private static String analyseEdges(Map<String, ElementLayout> elementLayoutMap, Map<String, String> nodeIDs, String tmp) {
        while (tmp.contains("\"group\":\"edges\"")) {
            String element = tmp.substring(tmp.indexOf("{\"data\":"), tmp.indexOf("\"classes\":\"\"}") + 13);

            String source = element.substring(element.indexOf("\"source\":\"") + 10);
            source = source.substring(0, source.indexOf("\""));

            String target = element.substring(element.indexOf("\"target\":\"") + 10);
            target = target.substring(0, target.indexOf("\""));

            elementLayoutMap.put(nodeIDs.get(source) +" (~) "+ nodeIDs.get(target), null);

            tmp = tmp.substring(tmp.indexOf(element) + element.length());
        }
        return tmp;
    }

    private static String analyseNodes(Map<String, ElementLayout> elementLayoutMap, Map<String, String> nodeIDs, String tmp) {
        int diamonds = 1;
        while (tmp.contains("\"group\":\"nodes\"")) {
            String element = tmp.substring(tmp.indexOf("{\"data\":"), tmp.indexOf("\"classes\":\"\"}") + 13);

            String elementName = null;
            if (element.contains("ellipse")) {
                if(element.contains("#C1C9B0")) {
                    elementName = "|&gt;";
                }else {
                    elementName = "[]";
                }
            } else if (element.contains("diamond")) {
                elementName = "" + diamonds++;
            } else {
                elementName = element.substring(element.indexOf("\"name\":\"") + 8, element.indexOf("\",\"width"));
                elementName = elementName.substring(0, elementName.indexOf("\\n"));
            }

            String width = element.substring(element.indexOf("\"width\":\"") + 9);
            width = width.substring(0, width.indexOf("px"));

            String id = element.substring(element.indexOf("\"id\":\"") + 6);
            id = id.substring(0, id.indexOf("\""));

            String height = element.substring(element.indexOf("\"height\":\"") + 10);
            height = height.substring(0, height.indexOf("px"));

            String x = element.substring(element.indexOf("\"x\":") + 4);
            x = x.substring(0, x.indexOf(","));

            String y = element.substring(element.indexOf("\"y\":") + 4);
            y = y.substring(0, y.indexOf("}"));

            String color = element.substring(element.indexOf("\"color\":") + 9);
            color = color.substring(0, color.indexOf("\",\"name"));

            elementLayoutMap.put(elementName, new ElementLayout(
                    elementName,
                    Double.parseDouble(width) * 2,
                    Double.parseDouble(height) * 2,
                    Double.parseDouble(x) * 2,
                    Double.parseDouble(y) * 2,
                    color));
            nodeIDs.put(id, elementName);

            tmp = tmp.substring(tmp.indexOf(element) + element.length());
        }
        return tmp;
    }
}
